<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>価値観マップ</title>
    <script src="https://cdn.jsdelivr.net/npm/mind-elixir@1.0.1/dist/mind-elixir.js"></script>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        #mindmap { width: 100%; height: 80vh; border: 1px solid #ccc; margin: 20px auto; }
        button { margin: 5px; padding: 10px; font-size: 16px; }
    </style>
</head>
<body>

    <h1>価値観マップ</h1>
    <button onclick="saveMindMap()">保存</button>
    <button onclick="loadMindMap()">ロード</button>
    <button onclick="clearMindMap()">クリア</button>

    <div id="mindmap"></div>

    <script>
        let mind = new MindElixir({
            el: '#mindmap',
            direction: MindElixir.RIGHT, // 価値観マップは右展開が見やすい
            draggable: true,
            contextMenu: true,
            toolBar: true,
            nodeMenu: true,
            keypress: true
        });

        // 価値観マップ向けの初期ノードデータ
        let initialData = {
            nodeData: {
                id: 'root',
                topic: '私の価値観 💡',
                children: [
                    { id: '1', topic: '人生の価値観 🌍', children: [
                        { id: '1-1', topic: '自由 ✈️' },
                        { id: '1-2', topic: '成長 📚' }
                    ]},
                    { id: '2', topic: '仕事の価値観 💼', children: [
                        { id: '2-1', topic: 'やりがい 🔥' },
                        { id: '2-2', topic: '収入 💰' }
                    ]},
                    { id: '3', topic: '家族 👨‍👩‍👧‍👦', children: [
                        { id: '3-1', topic: '愛 ❤️' },
                        { id: '3-2', topic: '時間 ⏳' }
                    ]},
                    { id: '4', topic: '健康 💪', children: [
                        { id: '4-1', topic: '運動 🏃' },
                        { id: '4-2', topic: '食事 🍎' }
                    ]}
                ]
            },
            linkData: {}
        };

        mind.init(initialData);

        function saveMindMap() {
            localStorage.setItem('mindmapData', JSON.stringify(mind.getData()));
            alert('価値観マップを保存しました！');
        }

        function loadMindMap() {
            const savedData = localStorage.getItem('mindmapData');
            if (savedData) {
                mind.refresh(JSON.parse(savedData));
                alert('保存した価値観マップをロードしました！');
            } else {
                alert('保存データがありません。');
            }
        }

        function clearMindMap() {
            localStorage.removeItem('mindmapData');
            mind.init(initialData);
            alert('価値観マップをリセットしました！');
        }
    </script>

</body>
</html>
